apply from: '../config.gradle'

// Скрипт для включения модулей android-standard из локального репозитория в settings.gradle

try {
    Properties properties = new Properties()
    properties.load(file('../local.properties').newDataInputStream())
    def androidStandardDebugDir = properties.getProperty('androidStandardDebug.dir')

    if (androidStandardDebugDir == null) {
        logger.error('androidStandardDebug.dir not defined. Please define it in local.properties file ' +
                'to enable android-standard debug mode.')
    } else {
        try {
            gradle.ext.androidStandardModules.each {
                include "$it"
                project(":$it").projectDir = new File("$androidStandardDebugDir/$it")
            }
        } catch (Throwable e) {
            logger.error(e.message)
        }
    }
} catch (Throwable ignored) {
    logger.error('local.properties file not found')
}
